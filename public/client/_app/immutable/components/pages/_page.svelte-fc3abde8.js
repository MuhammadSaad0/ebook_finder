import{S as j,i as K,s as W,k as S,q as z,a as T,l as D,m as F,r as I,h as v,c as C,n as w,b as L,G as E,u as U,B as V,p as N,I as ie,J as Z,e as Q,K as X,L as R,M as fe,f as O,t as B,d as G,N as ue,w as oe,x as re,y as _e,z as ce,g as J}from"../../chunks/index-c50cc6f5.js";import{p as ve}from"../../chunks/parse-f0c618df.js";import{j as H}from"../../chunks/singletons-c63ec924.js";H.disable_scroll_handling;H.goto;H.invalidate;const pe=H.invalidateAll;H.preload_data;H.preload_code;H.before_navigate;H.after_navigate;const he=H.apply_action;function me(a){const e=JSON.parse(a);return e.data&&(e.data=ve(e.data)),e}function de(a,e=()=>{}){const s=async({action:l,result:n,reset:o})=>{n.type==="success"&&(o!==!1&&HTMLFormElement.prototype.reset.call(a),await pe()),(location.origin+location.pathname===l.origin+l.pathname||n.type==="redirect"||n.type==="error")&&he(n)};async function t(l){var b,h,A;l.preventDefault();const n=new URL((b=l.submitter)!=null&&b.hasAttribute("formaction")?l.submitter.formAction:HTMLFormElement.prototype.cloneNode.call(a).action),o=new FormData(a),f=(h=l.submitter)==null?void 0:h.getAttribute("name");f&&o.append(f,((A=l.submitter)==null?void 0:A.getAttribute("value"))??"");const y=new AbortController;let g=!1;const d=await e({action:n,cancel:()=>g=!0,controller:y,data:o,form:a})??s;if(g)return;let u;try{const _=await fetch(n,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:o,signal:y.signal});u=me(await _.text()),u.type==="error"&&(u.status=_.status)}catch(_){if((_==null?void 0:_.name)==="AbortError")return;u={type:"error",error:_}}d({action:n,data:o,form:a,update:_=>s({action:n,result:u,reset:_==null?void 0:_.reset}),result:u})}return HTMLFormElement.prototype.addEventListener.call(a,"submit",t),{destroy(){HTMLFormElement.prototype.removeEventListener.call(a,"submit",t)}}}function Y(a){let e,s,t;return{c(){e=S("p"),s=z(a[3]),t=z(" pages"),this.h()},l(l){e=D(l,"P",{class:!0});var n=F(e);s=I(n,a[3]),t=I(n," pages"),n.forEach(v),this.h()},h(){w(e,"class","Author")},m(l,n){L(l,e,n),E(e,s),E(e,t)},p(l,n){n&8&&U(s,l[3])},d(l){l&&v(e)}}}function ye(a){let e,s,t,l,n,o,f,y,g,m,d,u=a[3]&&Y(a);return{c(){e=S("div"),s=S("p"),t=z(a[0]),l=T(),n=S("p"),o=z(a[1]),f=T(),u&&u.c(),y=T(),g=S("div"),m=S("a"),d=z("Download link"),this.h()},l(b){e=D(b,"DIV",{class:!0});var h=F(e);s=D(h,"P",{class:!0});var A=F(s);t=I(A,a[0]),A.forEach(v),l=C(h),n=D(h,"P",{class:!0});var _=F(n);o=I(_,a[1]),_.forEach(v),f=C(h),u&&u.l(h),y=C(h),g=D(h,"DIV",{class:!0});var r=F(g);m=D(r,"A",{href:!0,target:!0,rel:!0});var M=F(m);d=I(M,"Download link"),M.forEach(v),r.forEach(v),h.forEach(v),this.h()},h(){w(s,"class","Title"),w(n,"class","Author"),w(m,"href",a[2]),w(m,"target","_blank"),w(m,"rel","noreferrer"),w(g,"class","Link"),w(e,"class","card svelte-9uf0vp")},m(b,h){L(b,e,h),E(e,s),E(s,t),E(e,l),E(e,n),E(n,o),E(e,f),u&&u.m(e,null),E(e,y),E(e,g),E(g,m),E(m,d)},p(b,[h]){h&1&&U(t,b[0]),h&2&&U(o,b[1]),b[3]?u?u.p(b,h):(u=Y(b),u.c(),u.m(e,y)):u&&(u.d(1),u=null),h&4&&w(m,"href",b[2])},i:V,o:V,d(b){b&&v(e),u&&u.d()}}}function ge(a,e,s){let{title:t=""}=e,{author:l=""}=e,{link:n=""}=e,{pages:o=""}=e;return a.$$set=f=>{"title"in f&&s(0,t=f.title),"author"in f&&s(1,l=f.author),"link"in f&&s(2,n=f.link),"pages"in f&&s(3,o=f.pages)},[t,l,n,o]}class be extends j{constructor(e){super(),K(this,e,ge,ye,W,{title:0,author:1,link:2,pages:3})}}const x=/[a-zA-Z]/,$=(a,e=0)=>[...Array(a).keys()].map(s=>s+e);function ee(a,e,s){const t=a.slice();return t[7]=e[s],t}function te(a){let e;return{c(){e=S("div"),this.h()},l(s){e=D(s,"DIV",{class:!0,style:!0}),F(e).forEach(v),this.h()},h(){w(e,"class","cube svelte-1w8rpx6"),N(e,"animation-delay",a[7]*(+a[6]/10)+a[5]),N(e,"left",a[7]*(+a[3]/3+ +a[3]/15)+a[1]),Z(e,"pause-animation",a[4])},m(s,t){L(s,e,t)},p(s,t){t&10&&N(e,"left",s[7]*(+s[3]/3+ +s[3]/15)+s[1]),t&16&&Z(e,"pause-animation",s[4])},d(s){s&&v(e)}}}function ke(a){let e,s=$(3,0),t=[];for(let l=0;l<s.length;l+=1)t[l]=te(ee(a,s,l));return{c(){e=S("div");for(let l=0;l<t.length;l+=1)t[l].c();this.h()},l(l){e=D(l,"DIV",{class:!0,style:!0});var n=F(e);for(let o=0;o<t.length;o+=1)t[o].l(n);n.forEach(v),this.h()},h(){w(e,"class","wrapper svelte-1w8rpx6"),N(e,"--size",a[3]+a[1]),N(e,"--color",a[0]),N(e,"--duration",a[2])},m(l,n){L(l,e,n);for(let o=0;o<t.length;o+=1)t[o].m(e,null)},p(l,[n]){if(n&122){s=$(3,0);let o;for(o=0;o<s.length;o+=1){const f=ee(l,s,o);t[o]?t[o].p(f,n):(t[o]=te(f),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=s.length}n&10&&N(e,"--size",l[3]+l[1]),n&1&&N(e,"--color",l[0]),n&4&&N(e,"--duration",l[2])},i:V,o:V,d(l){l&&v(e),ie(t,l)}}}function Ee(a,e,s){var m;let{color:t="#FF3E00"}=e,{unit:l="px"}=e,{duration:n="1.5s"}=e,{size:o="60"}=e,{pause:f=!1}=e,y=((m=n.match(x))==null?void 0:m[0])??"s",g=n.replace(x,"");return a.$$set=d=>{"color"in d&&s(0,t=d.color),"unit"in d&&s(1,l=d.unit),"duration"in d&&s(2,n=d.duration),"size"in d&&s(3,o=d.size),"pause"in d&&s(4,f=d.pause)},[t,l,n,o,f,y,g]}class we extends j{constructor(e){super(),K(this,e,Ee,ke,W,{color:0,unit:1,duration:2,size:3,pause:4})}}function le(a,e,s){const t=a.slice();return t[7]=e[s],t[9]=s,t}function se(a){let e,s,t;return s=new we({props:{size:"45",color:"#FF3E00",unit:"px",duration:"1s"}}),{c(){e=S("div"),oe(s.$$.fragment),this.h()},l(l){e=D(l,"DIV",{class:!0});var n=F(e);re(s.$$.fragment,n),n.forEach(v),this.h()},h(){w(e,"class","Pulse svelte-fuxnnd")},m(l,n){L(l,e,n),_e(s,e,null),t=!0},i(l){t||(O(s.$$.fragment,l),t=!0)},o(l){B(s.$$.fragment,l),t=!1},d(l){l&&v(e),ce(s)}}}function ne(a){var c;let e=a[5](),s,t,l,n,o,f,y,g,m,d,u=a[0].openlibresults+"",b,h,A=e&&Le(),_=(c=a[0])==null?void 0:c.result,r=[];for(let i=0;i<_.length;i+=1)r[i]=ae(le(a,_,i));const M=i=>B(r[i],1,1,()=>{r[i]=null});return{c(){A&&A.c(),s=T(),t=S("div"),l=z('LibGen results for "'),n=z(a[2]),o=z('"'),f=T();for(let i=0;i<r.length;i+=1)r[i].c();y=T(),g=S("div"),m=S("p"),d=z("Hits found on OpenLibrary: "),b=z(u),this.h()},l(i){A&&A.l(i),s=C(i),t=D(i,"DIV",{class:!0});var p=F(t);l=I(p,'LibGen results for "'),n=I(p,a[2]),o=I(p,'"'),p.forEach(v),f=C(i);for(let q=0;q<r.length;q+=1)r[q].l(i);y=C(i),g=D(i,"DIV",{class:!0});var P=F(g);m=D(P,"P",{});var k=F(m);d=I(k,"Hits found on OpenLibrary: "),b=I(k,u),k.forEach(v),P.forEach(v),this.h()},h(){w(t,"class","OpenLib svelte-fuxnnd"),w(g,"class","OpenLib svelte-fuxnnd")},m(i,p){A&&A.m(i,p),L(i,s,p),L(i,t,p),E(t,l),E(t,n),E(t,o),L(i,f,p);for(let P=0;P<r.length;P+=1)r[P].m(i,p);L(i,y,p),L(i,g,p),E(g,m),E(m,d),E(m,b),h=!0},p(i,p){var P;if((!h||p&4)&&U(n,i[2]),p&1){_=(P=i[0])==null?void 0:P.result;let k;for(k=0;k<_.length;k+=1){const q=le(i,_,k);r[k]?(r[k].p(q,p),O(r[k],1)):(r[k]=ae(q),r[k].c(),O(r[k],1),r[k].m(y.parentNode,y))}for(J(),k=_.length;k<r.length;k+=1)M(k);G()}(!h||p&1)&&u!==(u=i[0].openlibresults+"")&&U(b,u)},i(i){if(!h){for(let p=0;p<_.length;p+=1)O(r[p]);h=!0}},o(i){r=r.filter(Boolean);for(let p=0;p<r.length;p+=1)B(r[p]);h=!1},d(i){A&&A.d(i),i&&v(s),i&&v(t),i&&v(f),ie(r,i),i&&v(y),i&&v(g)}}}function Le(a){return{c:V,l:V,m:V,d:V}}function ae(a){let e,s;return e=new be({props:{title:a[7].title,author:a[7].author,link:a[7].link,pages:a[7].pages}}),{c(){oe(e.$$.fragment)},l(t){re(e.$$.fragment,t)},m(t,l){_e(e,t,l),s=!0},p(t,l){const n={};l&1&&(n.title=t[7].title),l&1&&(n.author=t[7].author),l&1&&(n.link=t[7].link),l&1&&(n.pages=t[7].pages),e.$set(n)},i(t){s||(O(e.$$.fragment,t),s=!0)},o(t){B(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function Ae(a){var M;let e,s,t,l,n,o,f,y,g,m,d,u,b,h,A,_=a[3]&&se(),r=((M=a[0])==null?void 0:M.success)&&ne(a);return{c(){e=S("h1"),s=z("Ebook Finder"),t=T(),l=S("form"),n=S("input"),o=T(),f=S("div"),y=S("button"),g=z("Search"),m=T(),_&&_.c(),d=T(),r&&r.c(),u=Q(),this.h()},l(c){e=D(c,"H1",{class:!0});var i=F(e);s=I(i,"Ebook Finder"),i.forEach(v),t=C(c),l=D(c,"FORM",{method:!0,action:!0,class:!0});var p=F(l);n=D(p,"INPUT",{type:!0,name:!0}),p.forEach(v),o=C(c),f=D(c,"DIV",{class:!0});var P=F(f);y=D(P,"BUTTON",{formaction:!0});var k=F(y);g=I(k,"Search"),k.forEach(v),P.forEach(v),m=C(c),_&&_.l(c),d=C(c),r&&r.l(c),u=Q(),this.h()},h(){w(e,"class","Header svelte-fuxnnd"),w(n,"type","search"),w(n,"name","query"),w(l,"method","POST"),w(l,"action","?/search"),w(l,"class","SearchBox svelte-fuxnnd"),w(y,"formaction","?/search"),w(f,"class","SearchButton svelte-fuxnnd")},m(c,i){L(c,e,i),E(e,s),L(c,t,i),L(c,l,i),E(l,n),X(n,a[1]),L(c,o,i),L(c,f,i),E(f,y),E(y,g),L(c,m,i),_&&_.m(c,i),L(c,d,i),r&&r.m(c,i),L(c,u,i),b=!0,h||(A=[R(n,"input",a[6]),fe(de.call(null,l)),R(l,"submit",a[4]),R(y,"click",a[4])],h=!0)},p(c,[i]){var p;i&2&&X(n,c[1]),c[3]?_?i&8&&O(_,1):(_=se(),_.c(),O(_,1),_.m(d.parentNode,d)):_&&(J(),B(_,1,1,()=>{_=null}),G()),(p=c[0])!=null&&p.success?r?(r.p(c,i),i&1&&O(r,1)):(r=ne(c),r.c(),O(r,1),r.m(u.parentNode,u)):r&&(J(),B(r,1,1,()=>{r=null}),G())},i(c){b||(O(_),O(r),b=!0)},o(c){B(_),B(r),b=!1},d(c){c&&v(e),c&&v(t),c&&v(l),c&&v(o),c&&v(f),c&&v(m),_&&_.d(c),c&&v(d),r&&r.d(c),c&&v(u),h=!1,ue(A)}}}function Se(a,e,s){let t="",l="",{form:n}=e,o=!1;function f(){s(2,l=t),s(3,o=!0),s(0,n.success=!1,n)}const y=()=>s(3,o=!1);function g(){t=this.value,s(1,t)}return a.$$set=m=>{"form"in m&&s(0,n=m.form)},[n,t,l,o,f,y,g]}class ze extends j{constructor(e){super(),K(this,e,Se,Ae,W,{form:0})}}export{ze as default};
